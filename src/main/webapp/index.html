<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game API Client</title>
    <style>
        body {
            font-family: sans-serif;
        }
        .container {
            width: 90%; /* Increased width */
            margin: 0 auto;
            display: flex; /* Use flexbox */
            gap: 20px; /* Add gap between columns */
        }
        .left-column {
            flex: 2; /* Take up 2/3 of the space */
        }
        .right-column {
            flex: 1; /* Take up 1/3 of the space */
            border: 1px solid #ccc;
            padding: 10px;
            min-height: 100px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"], input[type="number"], input[type="date"], textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #results {
            margin-top: 20px;
            min-height: 100px;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="left-column">
        <h1>Game API Client</h1>

        <h2>Get All Games</h2>
        <button onclick="getAllGames()">Get All Games</button>

        <h2>Get Game by ID</h2>
        <div class="form-group">
            <label for="getGameId">Game ID:</label>
            <input type="number" id="getGameId">
        </div>
        <button onclick="getGameById()">Get Game</button>

        <h2>Create New Game</h2>
        <div class="form-group">
            <label for="createTitle">Title:</label>
            <input type="text" id="createTitle">
        </div>
        <div class="form-group">
            <label for="createDeveloper">Developer:</label>
            <input type="text" id="createDeveloper">
        </div>
        <div class="form-group">
            <label for="createDescription">Description:</label>
            <textarea id="createDescription"></textarea>
        </div>
        <div class="form-group">
            <label for="createReleaseDate">Release Date:</label>
            <input type="date" id="createReleaseDate">
        </div>
        <div class="form-group">
            <label for="createUpc">UPC:</label>
            <input type="text" id="createUpc">
        </div>
        <button onclick="createGame()">Create Game</button>

        <h2>Create Multiple Games</h2>
        <div class="form-group">
            <label for="createGames">Games (JSON Array):</label>
            <textarea id="createGames" rows="5"></textarea>
        </div>
        <button onclick="createMultipleGames()">Create Multiple Games</button>

        <h2>Update Game</h2>
        <div class="form-group">
            <label for="updateId">Game ID:</label>
            <input type="number" id="updateId">
        </div>
        <div class="form-group">
            <label for="updateTitle">Title:</label>
            <input type="text" id="updateTitle">
        </div>
        <div class="form-group">
            <label for="updateDeveloper">Developer:</label>
            <input type="text" id="updateDeveloper">
        </div>
        <div class="form-group">
            <label for="updateDescription">Description:</label>
            <textarea id="updateDescription"></textarea>
        </div>
        <div class="form-group">
            <label for="updateReleaseDate">Release Date:</label>
            <input type="date" id="updateReleaseDate">
        </div>
        <div class="form-group">
            <label for="updateUpc">UPC:</label>
            <input type="text" id="updateUpc">
        </div>
        <button onclick="updateGame()">Update Game</button>

        <h2>Delete Game</h2>
        <div class="form-group">
            <label for="deleteId">Game ID:</label>
            <input type="number" id="deleteId">
        </div>
        <button onclick="deleteGame()">Delete Game</button>

        <h2>Find Games by Developer</h2>
        <div class="form-group">
            <label for="findDeveloper">Developer:</label>
            <input type="text" id="findDeveloper">
        </div>
        <button onclick="findGamesByDeveloper()">Find Games</button>

        <h2>Find Games by Title</h2>
        <div class="form-group">
            <label for="findTitle">Title:</label>
            <input type="text" id="findTitle">
        </div>
        <button onclick="findGamesByTitle()">Find Games</button>
    </div>
    <div class="right-column">
        <h2>Results</h2>
        <div id="results"></div>
    </div>
</div>

<script>
    const API_BASE_URL = '/api/games'; // Adjust if your API path is different

    function displayResults(data) {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = ''; // Clear previous results

        if (Array.isArray(data)) {
            if (data.length === 0) {
                resultsDiv.innerHTML = '<p>No results found.</p>';
            } else {
                const ul = document.createElement('ul');
                data.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = JSON.stringify(item);
                    ul.appendChild(li);
                });
                resultsDiv.appendChild(ul);
            }
        } else if (typeof data === 'object') {
            resultsDiv.textContent = JSON.stringify(data);
        } else {
            resultsDiv.textContent = data;
        }
    }

    function displayError(message) {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = `<p class="error">${message}</p>`;
    }

    async function getAllGames() {
        try {
            const response = await fetch(API_BASE_URL);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            displayResults(data.games());
        } catch (error) {
            displayError(error.message);
        }
    }

    async function getGameById() {
        const id = document.getElementById('getGameId').value;
        try {
            const response = await fetch(`${API_BASE_URL}/${id}`);
            if (!response.ok) {
                if (response.status === 404) {
                    throw new Error('Game not found.');
                }
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            displayResults(data);
        } catch (error) {
            displayError(error.message);
        }
    }

    async function createGame() {
        const title = document.getElementById('createTitle').value;
        const developer = document.getElementById('createDeveloper').value;
        const description = document.getElementById('createDescription').value;
        const releaseDate = document.getElementById('createReleaseDate').value;
        const upc = document.getElementById('createUpc').value;

        const game = { title, developer, description, releaseDate, upc };

        try {
            const response = await fetch(API_BASE_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(game)
            });
            if (!response.ok) {
                const errorData = await response.text();
                throw new Error(`HTTP error! status: ${response.status}, message: ${errorData}`);
            }
            const data = await response.json();
            displayResults(data);
        } catch (error) {
            displayError(error.message);
        }
    }

    async function createMultipleGames() {
        const gamesJson = document.getElementById('createGames').value;
        try {
            const games = JSON.parse(gamesJson);
            const response = await fetch(`${API_BASE_URL}/batch`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(games)
            });
            if (!response.ok) {
                const errorData = await response.text();
                throw new Error(`HTTP error! status: ${response.status}, message: ${errorData}`);
            }
            const data = await response.json();
            displayResults(data);
        } catch (error) {
            displayError(error.message);
        }
    }

    async function updateGame() {
        const id = document.getElementById('updateId').value;
        const title = document.getElementById('updateTitle').value;
        const developer = document.getElementById('updateDeveloper').value;
        const description = document.getElementById('updateDescription').value;
        const releaseDate = document.getElementById('updateReleaseDate').value;
        const upc = document.getElementById('updateUpc').value;

        const game = { title, developer, description, releaseDate, upc };

        try {
            const response = await fetch(`${API_BASE_URL}/${id}`, {
                method: 'PATCH',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(game)
            });
            if (!response.ok) {
                const errorData = await response.text();
                throw new Error(`HTTP error! status: ${response.status}, message: ${errorData}`);
            }
            displayResults("Game updated successfully.");
        } catch (error) {
            displayError(error.message);
        }
    }

    async function deleteGame() {
        const id = document.getElementById('deleteId').value;
        try {
            const response = await fetch(`${API_BASE_URL}/${id}`, {
                method: 'DELETE'
            });
            if (!response.ok) {
                const errorData = await response.text();
                throw new Error(`HTTP error! status: ${response.status}, message: ${errorData}`);
            }
            displayResults("Game deleted successfully.");
        } catch (error) {
            displayError(error.message);
        }
    }

    async function findGamesByDeveloper() {
        const developer = document.getElementById('findDeveloper').value;
        try {
            const response = await fetch(`${API_BASE_URL}/developer/${developer}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            displayResults(data.games());
        } catch (error) {
            displayError(error.message);
        }
    }

    async function findGamesByTitle() {
        const title = document.getElementById('findTitle').value;
        try {
            const response = await fetch(`${API_BASE_URL}/title/${title}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            displayResults(data.games());
        } catch (error) {
            displayError(error.message);
        }
    }
</script>
</body>
</html>